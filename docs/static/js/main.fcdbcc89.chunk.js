(this["webpackJsonp16-journal-app"]=this["webpackJsonp16-journal-app"]||[]).push([[0],{141:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var a,c,r=n(1),s=n(24),i=n.n(s),o=n(13),l=n(8),u=n(50),j=n(7),d=n.n(j),b=n(15),m=n(18),O=n.n(m),p="https://journal-app-xprs.herokuapp.com/api",h=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.length>2&&void 0!==r[2]?r[2]:"GET",c="".concat(p,"/").concat(t),"GET"!==a){e.next=6;break}return e.abrupt("return",fetch(c));case 6:return e.abrupt("return",fetch(c,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(n)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:"GET",c="".concat(p,"/").concat(t),r=localStorage.getItem("token")||"","GET"!==a){e.next=7;break}return e.abrupt("return",fetch(c,{method:a,headers:{"x-token":r}}));case 7:return e.abrupt("return",fetch(c,{method:a,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(n)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=Object(o.b)("notes/Start New Note",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,c=O()().format(),r={title:" ",body:" ",date:c},e.next=5,f("notes/",r,"POST");case 5:return s=e.sent,e.next=8,s.json();case 8:i=e.sent,o=i.nota.id,i.ok&&(a(k({body:"",title:"",id:o,date:c})),a(y({body:"",title:"",id:o,date:c})));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(o.b)("notes/ Start geting notes",function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("notes/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=8;break}return e.abrupt("return",a.notas);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(o.b)("notes/ Start updating note",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch,e.next=3,f("notes/".concat(t.id),t,"PUT");case 3:return a=e.sent,e.next=6,a.json();case 6:if(!e.sent.ok){e.next=9;break}return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),N=Object(o.b)("notes/ Start deleting note",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,f("notes/".concat(t),{},"DELETE");case 3:return c=e.sent,e.next=6,c.json();case 6:if(!e.sent.ok){e.next=10;break}return a(E()),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(o.c)({name:"notes",initialState:{notes:null,active:null},reducers:{addNewNote:function(e,t){e.notes=[].concat(Object(u.a)(e.notes),[t.payload])},setActiveNote:function(e,t){e.active=t.payload},clearActive:function(e){e.active=null},clearNotes:function(e,t){e.notes=null}},extraReducers:(a={},Object(l.a)(a,g.fulfilled,(function(e,t){e.notes=t.payload})),Object(l.a)(a,v.fulfilled,(function(e,t){e.notes=e.notes.map((function(n){return n.id===e.active.id?t.payload:n}))})),Object(l.a)(a,N.fulfilled,(function(e,t){e.notes=e.notes.filter((function(e){return e.id!==t.payload}))})),a)}),w=_.actions,k=w.addNewNote,y=w.setActiveNote,E=w.clearActive,C=w.clearNotes,S=_.reducer,I=Object(o.b)("auth/Start Login User",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,c=t.password,r=n.dispatch,e.next=4,h("auth",{email:a,password:c},"POST");case 4:return s=e.sent,e.next=7,s.json();case 7:i=e.sent,console.log(i),i.ok?(localStorage.setItem("token",i.token),localStorage.setItem("token-init-date",(new Date).getTime()),r(F({name:i.name,lastName:i.lastName,id:i.uid}))):r(A(i.msg));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(o.b)("auth/Start Register User",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,c=t.password,r=t.name,s=t.lastName,i=n.dispatch,e.next=4,h("auth/new",{email:a,password:c,name:r,lastName:s},"POST");case 4:return o=e.sent,e.next=7,o.json();case 7:l=e.sent,console.log(l),l.ok?(localStorage.setItem("token",l.token),localStorage.setItem("token-init-date",(new Date).getTime()),i(F({name:l.name,lastName:l.lastName,id:l.uid}))):i(A(l.msg));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),V=Object(o.b)("auth/Start Checking",function(){var e=Object(b.a)(d.a.mark((function e(t,n){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,f("auth/renew");case 3:return c=e.sent,e.next=6,c.json();case 6:(r=e.sent).ok&&(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(F({name:r.name,lastName:r.lastName,id:r.uid})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L={user:{email:"",uid:""},checking:null,msgError:null},T=Object(o.c)({name:"auth",initialState:L,reducers:{userLogin:function(e,t){e.user=t.payload},userLogOut:function(e,t){e.user=L.user,localStorage.removeItem("token"),localStorage.removeItem("token-init-date")},setMsgError:function(e,t){e.msgError=t.payload},clearMsgError:function(e){e.msgError=null}},extraReducers:(c={},Object(l.a)(c,I.rejected,(function(e,t){})),Object(l.a)(c,I.pending,(function(e){e.checking=!0})),Object(l.a)(c,I.fulfilled,(function(e,t){e.checking=!1})),Object(l.a)(c,V.pending,(function(e){e.checking=!0})),Object(l.a)(c,V.fulfilled,(function(e){e.checking=!1})),Object(l.a)(c,V.rejected,(function(e){e.checking=!0})),c)}),R=T.actions,F=R.userLogin,D=R.userLogOut,A=R.setMsgError,G=R.clearMsgError,J=T.reducer,M=Object(o.a)({reducer:{notes:S,auth:J}}),B=n(5),U=n(16),Q=n(6),Y=n(0),q=function(){return Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)("div",{className:"s",children:Object(Y.jsxs)("div",{className:"auth__checking",children:[Object(Y.jsx)("h1",{children:"Checando la informaci\xf3n antes de acceder a la aplicaci\xf3n"}),Object(Y.jsx)("h3",{children:"Este proceso puede tardar unos segundos. "}),Object(Y.jsx)("p",{children:"Redireccionano..."}),Object(Y.jsx)("br",{}),Object(Y.jsx)("br",{}),Object(Y.jsx)("p",{children:"Aplicaci\xf3n desarrollada en React"})]})})})},z=n(3),H=n(17),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(H.a)(t,2),a=n[0],c=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},i=function(e){var t=e.target;c(Object(z.a)(Object(z.a)({},a),{},Object(l.a)({},t.name,t.value)))};return[a,i,s]},W=function(){var e=Object(B.c)((function(e){return e.notes})).active,t=K(e),n=Object(H.a)(t,3),a=n[0],c=n[1],s=n[2],i=a.title,o=a.body,l=Object(B.b)(),u=Object(r.useRef)(e.id);return Object(r.useEffect)((function(){e.id!==u.current&&(s(e),u.current=e.id)}),[e,s]),Object(r.useEffect)((function(){l(y(Object(z.a)({id:a.id},a)))}),[a,l]),Object(Y.jsxs)("div",{className:"notes ",children:[Object(Y.jsxs)("div",{className:"notes__top",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)("p",{children:O()(e.date).format("LL")})}),Object(Y.jsx)("button",{onClick:function(){l(v(e))},className:"btn btn-primary",children:"Guardar"})]}),Object(Y.jsxs)("div",{className:"notes__content",children:[Object(Y.jsx)("input",{type:"text",className:"notes__input",name:"title",value:i,placeholder:"Escriba alg\xfan t\xedtulo",onChange:c}),Object(Y.jsx)("textarea",{type:"text",className:"notes__textarea",name:"body",placeholder:"Qu\xe9 pas\xf3 el d\xeda de hoy?",value:o,onChange:c})]}),Object(Y.jsx)("div",{onClick:function(){console.log("deleting note"),l(N(e.id))},className:"notes__button",children:Object(Y.jsx)("p",{children:"Delete"})})]})},X=function(){var e=Object(B.c)((function(e){return e.auth.user})),t=e.name,n=e.lastName;return Object(Y.jsxs)("div",{className:"journal__nothing",children:[Object(Y.jsxs)("p",{className:"journal__title",children:["\xa1Bienvenido ",t+" "+n,"!"]}),Object(Y.jsx)("p",{children:"Seleccione una nota"}),Object(Y.jsx)("p",{children:"O cree una nueva entrada"}),Object(Y.jsx)("i",{className:"far fa-star fa-5x"})]})},Z=function(e){var t=e.id,n=e.title,a=e.body,c=e.date,r=Object(B.b)();return Object(Y.jsxs)("div",{className:"journal__entry",onClick:function(){r(y({id:t,title:n,body:a,date:c}))},children:[Object(Y.jsxs)("div",{className:"journal__text",children:[Object(Y.jsx)("strong",{children:Object(Y.jsx)("p",{children:n})}),Object(Y.jsx)("p",{className:"journal__text-body",children:a})]}),Object(Y.jsxs)("div",{className:"journal__date",children:[Object(Y.jsx)("span",{children:O()(c).format("dddd")}),Object(Y.jsx)("h4",{children:O()(c).format("Do")})]})]})},$=function(){var e=Object(B.c)((function(e){return e.notes})).notes;return Object(Y.jsx)("div",{className:"journal__entries animate__animated animate__fadeInDown",children:e&&e.map((function(e){return Object(Y.jsx)(Z,{id:e.id,title:e.title,body:e.body,date:e.date},e.id)}))})},ee=function(){var e=Object(B.b)(),t=Object(B.c)((function(e){return e.auth})).user;return Object(Y.jsxs)("div",{className:"sidebar",children:[Object(Y.jsxs)("div",{className:"sidebar__top",children:[Object(Y.jsxs)("p",{children:[t.name," ",t.lastName]}),Object(Y.jsx)("button",{className:"btn btn-danger",onClick:function(){e(y(null)),e(C()),e(D())},children:"Cerrar sesi\xf3n"})]}),Object(Y.jsxs)("div",{className:"sidebar__icon",onClick:function(){e(x())},children:[Object(Y.jsx)("i",{className:"far fa-calendar-plus fa-5x"}),Object(Y.jsx)("p",{children:"Crea una nueva entrada"})]}),Object(Y.jsx)($,{})]})},te=function(){var e=Object(B.c)((function(e){return e.notes})).active,t=Object(B.c)((function(e){return e.auth})).user,n=Object(B.b)();return Object(r.useEffect)((function(){n(g(t.id))}),[n,t.id]),Object(Y.jsxs)("div",{className:"journal  animate__animated animate__fadeInLeftBig",children:[Object(Y.jsx)(ee,{}),e?Object(Y.jsx)(W,{}):Object(Y.jsx)(X,{})]})},ne=n(27),ae=n.n(ne),ce=function(){var e=K({email:"",password:""}),t=Object(H.a)(e,2),n=t[0],a=t[1],c=n.email,s=n.password,i=Object(B.b)(),o=Object(r.useState)({isValidEmail:!0,msgEmail:null,isValidPassword:!0,msgPassword:null}),l=Object(H.a)(o,2),u=l[0],j=l[1],d=u.isValidEmail,b=u.isValidPassword,m=u.msgEmail,O=u.msgPassword,p=Object(B.c)((function(e){return e.auth})).msgError;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"auth__content-left ",children:Object(Y.jsxs)("div",{className:"form animate__animated animate__fadeInLeft",children:[p&&Object(Y.jsx)("p",{className:"msg-error",children:p}),Object(Y.jsxs)("form",{className:"auth__form",children:[Object(Y.jsx)("h1",{children:"Iniciar sesi\xf3n"}),Object(Y.jsxs)("div",{className:d?"input__container":"input__container error",children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-envelope"})}),Object(Y.jsx)("input",{onChange:a,className:d?"input":"input error-input",name:"email",value:c,autoComplete:"off",placeholder:"nombre@ejemplo.com",type:"text"})]}),Object(Y.jsx)("p",{children:m}),Object(Y.jsxs)("div",{className:b?"input__container":"input__container error",children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-key"})}),Object(Y.jsx)("input",{onChange:a,className:b?"input":"input error-input",name:"password",placeholder:"Introduce 6 caracteres o m\xe1s",value:s,autoComplete:"off",type:"password"})]}),Object(Y.jsx)("p",{children:O}),Object(Y.jsx)("div",{className:"btn-group",children:Object(Y.jsx)("button",{onClick:function(e){return e.preventDefault(),ae.a.isEmail(c)?(j((function(e){return Object(z.a)(Object(z.a)({},e),{},{isValidEmail:!0,msgEmail:""})})),s.trim().length<8?j((function(e){return Object(z.a)(Object(z.a)({},e),{},{isValidPassword:!1,msgPassword:"La contrase\xf1a debe tener al menos 8 caracteres"})})):(j((function(e){return Object(z.a)(Object(z.a)({},e),{},{isValidPassword:!0,msgPassword:""})})),void i(I({email:c,password:s})))):j((function(e){return Object(z.a)(Object(z.a)({},e),{},{isValidEmail:!1,msgEmail:"Correo no valido"})}))},className:"btn btn-primary btn-block",children:"INICIAR SESI\xd3N"})}),Object(Y.jsxs)("p",{children:["\xbfA\xfan no estas registrado?",Object(Y.jsx)(U.b,{onClick:G,to:"/auth/register",children:"Registrate"})]})]})]})}),Object(Y.jsx)("div",{className:"auth__content-right",children:Object(Y.jsx)("div",{className:"auth__img",children:Object(Y.jsx)("img",{src:"https://images2.alphacoders.com/559/559116.png",alt:"logo"})})})]})},re=function(){var e=K({email:"",name:"",lastName:"",password:"",password2:""}),t=Object(H.a)(e,2),n=t[0],a=t[1],c=n.email,s=n.password,i=n.password2,o=n.name,l=n.lastName,u=Object(B.c)((function(e){return e.auth})).msgError,j=Object(B.b)(),d=Object(r.useState)({isValidEmail:!0,isValidPasword:!0,isValidPasword2:!0,isValidName:!0,msgEmail:null,msgName:null,msgPasword:null}),b=Object(H.a)(d,2),m=b[0],O=b[1],p=m.msgEmail,h=m.msgName,f=m.msgPasword,x=m.isValidName,g=m.isValidEmail,v=m.isValidPasword;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"auth__content-left",children:Object(Y.jsxs)("div",{className:"form animate__animated animate__fadeInLeft",children:[u&&Object(Y.jsx)("p",{className:"msg-error",children:u}),Object(Y.jsxs)("form",{className:"auth__form",children:[Object(Y.jsx)("h1",{children:"Reg\xedstrate"}),Object(Y.jsxs)("div",{className:"input__container ".concat(!x&&"error"),children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-user"})}),Object(Y.jsx)("input",{className:"input",name:"name",placeholder:"Escribe tu nombre",value:o,autoComplete:"off",type:"text",onChange:a})]}),Object(Y.jsx)("p",{children:h}),Object(Y.jsxs)("div",{className:"input__container",children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-signature"})}),Object(Y.jsx)("input",{className:"input",name:"lastName",placeholder:"Escribe tu apellido",value:l,autoComplete:"off",type:"text",onChange:a})]}),Object(Y.jsxs)("div",{className:"input__container ".concat(!g&&"error "),children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-envelope"})}),Object(Y.jsx)("input",{className:"input",name:"email",placeholder:"nombre@ejemplo.com",value:c,autoComplete:"off",type:"text",onChange:a})]}),Object(Y.jsx)("p",{children:p}),Object(Y.jsxs)("div",{className:"input__container ".concat(!v&&"error"),children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-key"})}),Object(Y.jsx)("input",{className:"input",name:"password",placeholder:"Escribe tu contrase\xf1a",value:s,autoComplete:"off",type:"password",onChange:a})]}),Object(Y.jsx)("p",{children:f}),Object(Y.jsxs)("div",{className:"input__container ".concat(!v&&"error"),children:[Object(Y.jsx)("label",{htmlFor:"",children:Object(Y.jsx)("i",{className:"fas fa-key"})}),Object(Y.jsx)("input",{className:"input",name:"password2",placeholder:"Repite tu contrase\xf1a",value:i,autoComplete:"off",type:"password",onChange:a})]}),Object(Y.jsx)("div",{className:"btn-group",children:Object(Y.jsx)("button",{onClick:function(e){return e.preventDefault(),o.length<=0?O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgName:"El nombre no debe estar vacio",isValidName:!1})})):(O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgName:null,isValidName:!0})})),ae.a.isEmail(c)?(O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgEmail:null,isValidEmail:!0})})),s.trim().length<=8||i.trim().length<=8?O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgPasword:"La contrase\xf1a debe tener al menos 8 caracteres",isValidPasword:!1})})):(O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgPasword:null,isValidPasword:!0})})),s!==i?O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgPasword:"Las contrase\xf1as no coinciden",isValidPasword:!1})})):(O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgPasword:null,isValidPasword:!0})})),void j(P({email:c,password:s,name:o,lastName:l}))))):O((function(e){return Object(z.a)(Object(z.a)({},e),{},{msgEmail:"Correo no valido",isValidEmail:!1})})))},className:"btn btn-primary btn-block",children:"REGISTRATE"})}),Object(Y.jsxs)("p",{children:["\xbfYa est\xe1s registrado?",Object(Y.jsx)(U.b,{to:"/auth/login",children:"Inicia sesi\xf3n"})]})]})]})}),Object(Y.jsx)("div",{className:"auth__content-right",children:Object(Y.jsx)("div",{className:"auth__img",children:Object(Y.jsx)("img",{src:"https://images2.alphacoders.com/559/559116.png",alt:"logo"})})})]})},se=function(){return Object(Y.jsx)(U.a,{children:Object(Y.jsx)("div",{className:"auth",children:Object(Y.jsxs)(Q.d,{children:[Object(Y.jsx)(Q.b,{exact:!0,path:"/auth/login",component:ce}),Object(Y.jsx)(Q.b,{exact:!0,path:"/auth/register",component:re}),Object(Y.jsx)(Q.a,{to:"/auth/login"})]})})})},ie=n(28),oe=["isLoggedIn","component"],le=function(e){var t=e.isLoggedIn,n=e.component,a=Object(ie.a)(e,oe);return Object(Y.jsx)(Q.b,Object(z.a)(Object(z.a)({},a),{},{component:function(e){return t?Object(Y.jsx)(n,Object(z.a)({},e)):Object(Y.jsx)(Q.a,{to:"/auth"})}}))},ue=["isLoggedIn","component"],je=function(e){var t=e.isLoggedIn,n=e.component,a=Object(ie.a)(e,ue);return Object(Y.jsx)(Q.b,Object(z.a)(Object(z.a)({},a),{},{component:function(e){return t?Object(Y.jsx)(Q.a,{to:"/"}):Object(Y.jsx)(n,Object(z.a)({},e))}}))},de=function(){var e=Object(B.c)((function(e){return e.auth})),t=e.user,n=e.checking,a=Object(B.b)();return Object(r.useEffect)((function(){console.log("checking"),a(V())}),[a]),n?Object(Y.jsx)(q,{}):Object(Y.jsx)(U.a,{children:Object(Y.jsx)("div",{className:"main",children:Object(Y.jsxs)(Q.d,{children:[Object(Y.jsx)(je,{path:"/auth",component:se,isLoggedIn:!!t.id}),Object(Y.jsx)(le,{exact:!0,path:"/",component:te,isLoggedIn:!!t.id}),Object(Y.jsx)(Q.a,{to:"/"})]})})})},be=function(){return Object(Y.jsx)(B.a,{store:M,children:Object(Y.jsx)(de,{})})};n(141);i.a.render(Object(Y.jsx)(be,{}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.fcdbcc89.chunk.js.map